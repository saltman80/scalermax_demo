<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ScalerMax Admin Dashboard</title>
  <meta property="og:title" content="ScalerMax Dashboard">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; script-src 'self' https: 'nonce-a1b2c3'; style-src 'self' https: 'nonce-a1b2c3'; object-src 'none'; base-uri 'self'; frame-ancestors 'none';">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ENjdO4Dr2bkBIFxQpeoYz1CnGdZXQ7YKj+47HCsHEB2z9vOo5dKZ7HisZV64VAN2" crossorigin="anonymous">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" integrity="sha512-p6N8z1lnjIYE/4ub2QzEC2lN6pGHixuJv2z7P7q+VZl+PvGhDwXMJv+0U1TpH+EOqs0c1aj3Gq38PDRYTq0c9w==" crossorigin="anonymous" referrerpolicy="no-referrer">
  <style nonce="a1b2c3">
    body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: #0d0b1f; color:#e0e0e0; }
    .sidebar-desktop { height: 100vh; position: fixed; top: 0; left: 0; width: 240px; padding-top: 1rem; background-color: #1b1431; overflow-y: auto; }
    .sidebar-desktop a { color: #d1c4e9; padding: .75rem 1.25rem; display: block; text-decoration: none; }
    .sidebar-desktop a.active, .sidebar-desktop a:hover { color: #fff; background-color: #371c59; }
    .sidebar-logo { font-size: 1.5rem; color: #fff; font-weight: bold; }
    main { margin-top: 0; margin-left: 240px; padding: 1rem; }
    @media (max-width: 768px) {
      .sidebar-desktop { display: none; }
      main { margin-left: 0; }
    }
    .card-counter { display: flex; align-items: center; justify-content: space-between; padding: 1rem; color: #fff; }
    .card-counter .icon { font-size: 2rem; opacity: .7; }
    .card-counter .count { font-size: 1.75rem; font-weight: bold; }
    .card { background:#1d1533; border:none; color:#e0e0e0; box-shadow:0 0 10px rgba(155,92,245,0.3); }
    .chat-card { background:#1e1e2f; box-shadow:0 0 10px 2px rgba(155,92,245,0.6); }
    #chat-container { height:300px; overflow-y:auto; padding:0.5rem; }
    .message { padding:0.25rem 0.5rem; margin-bottom:0.25rem; border-radius:4px; }
    .message-user { background:#4b0082; color:#fff; text-align:right; }
    .message-ai { background:#333; color:#fff; }
    .message-system { background:#222; color:#e0e0e0; font-style:italic; }
    .api-btn {
      background: linear-gradient(to right, #39e09b, #9c6dfd);
      color: #fff;
      border: none;
      padding: 0.8rem 1.5rem;
      font-size: 1.25rem;
      border-radius: 0.5rem;
      font-weight: 500;
      cursor: pointer;
    }
    .send-btn {
      background: linear-gradient(45deg, #9b5cf5, #22c55e);
      color: #fff;
      border: none;
    }
    .send-btn:hover { opacity: 0.9; }
    .api-btn:hover { opacity: 0.9; }
    .connect-box {
      text-align: center;
      padding: 2rem 0;
      background-color: #141324;
      border-radius: 0.75rem;
      box-shadow: 0 0 12px #4c2f9b;
    }
    .connect-buttons { display: flex; justify-content: center; gap: 1rem; }
    .demo-note { color: #aaa; margin-top: 1rem; }
  </style>
</head>
<body>

  <aside class="sidebar-desktop">
    <div class="text-center mb-3 sidebar-logo">ScalerMax</div>
    <a href="#" class="active">Dashboard</a>
    <a href="#">Intents</a>
    <a href="#">Routes</a>
    <a href="#">Settings</a>
  </aside>
    <main role="main" class="container-fluid">
      <div class="connect-box card mb-4">
        <h2 class="mb-2">Connect Your AI Provider</h2>
        <p class="text-muted mb-3">Connect your accounts to get started.</p>
        <div class="connect-buttons">
          <button class="btn api-btn" onclick="showDemoText('openrouter-demo')">OpenRouter</button>
          <button class="btn api-btn" onclick="showDemoText('straico-demo')">Straico</button>
        </div>
        <div id="openrouter-demo" class="demo-note" style="display:none;">ðŸ”’ Demo Only</div>
        <div id="straico-demo" class="demo-note" style="display:none;">ðŸ”’ Demo Only</div>
        <div class="mt-3">
          <div class="input-group">
            <input id="keyNameInput" type="text" class="form-control" placeholder="Name of Key">
            <button id="getKeyBtn" class="btn api-btn">Get Key</button>
          </div>
          <div id="apikeyMessage" style="color:#fff; display:none;"></div>
        </div>
      </div>
    <div class="row">
      <div class="col-lg-4 order-lg-1 mb-4">
        <h2>Chat Demo</h2>
        <div class="card chat-card text-light">
          <div id="chat-container" class="mb-2" aria-live="polite" role="log"></div>
          <form id="chat-form" class="d-flex">
            <input id="chat-input" type="text" class="form-control form-control-lg me-2" placeholder="Type a message..." aria-label="chat input" disabled>
            <button id="send-button" class="btn send-btn btn-lg" type="submit" disabled>Send</button>
          </form>
        </div>
      </div>
      <div class="col-lg-8 order-lg-2">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h1 class="h2 m-0">Dashboard</h1>
          <div>
            <button id="refreshBtn" class="btn btn-sm btn-outline-secondary">Refresh</button>
          </div>
        </div>
        <div class="card p-3 mb-4">
          <h5 class="mb-3">Demo Keys</h5>
          <ul class="mb-0" id="demoKeyList">
            <li>VibeSheet</li>
            <li>AahSheet</li>
            <li>AI Tool</li>
          </ul>
        </div>
        <div class="row g-3 mb-4">
      <div class="col-sm-6 col-md-3">
        <div class="card bg-primary">
          <div class="card-counter">
            <div>
              <div class="card-title">Total Requests</div>
              <div class="count"><span class="counter" data-target="12345">0</span></div>
            </div>
            <div class="icon"></div>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-md-3">
        <div class="card bg-success">
          <div class="card-counter">
            <div>
              <div class="card-title">Active Intents</div>
              <div class="count"><span class="counter" data-target="456">0</span></div>
            </div>
            <div class="icon"></div>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-md-3">
        <div class="card bg-warning">
          <div class="card-counter">
            <div>
              <div class="card-title">Error Rate</div>
              <div class="count"><span class="counter" data-target="2.5" data-decimals="1">0</span><span>%</span></div>
            </div>
            <div class="icon"></div>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-md-3">
        <div class="card bg-danger">
          <div class="card-counter">
            <div>
              <div class="card-title">Avg Latency</div>
              <div class="count"><span class="counter" data-target="120">0</span><span>ms</span></div>
            </div>
            <div class="icon"></div>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-md-3">
        <div class="card bg-info">
          <div class="card-counter">
            <div>
              <div class="card-title">Placeholder A</div>
              <div class="count"><span class="counter" data-target="0">0</span></div>
            </div>
            <div class="icon"></div>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-md-3">
        <div class="card bg-secondary">
          <div class="card-counter">
            <div>
              <div class="card-title">Placeholder B</div>
              <div class="count"><span class="counter" data-target="0">0</span></div>
            </div>
            <div class="icon"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="row g-4">
      <div class="col-lg-6">
        <div class="card" data-animation="fade-up" data-animation-delay="100">
          <div class="card-header">Requests per Hour</div>
          <div class="card-body">
            <canvas id="requestsChart" height="200"></canvas>
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="card" data-animation="fade-up" data-animation-delay="200">
          <div class="card-header">Latency Over Last 7 Days</div>
          <div class="card-body">
            <canvas id="latencyChart" height="200"></canvas>
          </div>
        </div>
      </div>
    </div>
    <div class="mt-4">
      <h2>Recent Logs</h2>
      <div class="table-responsive">
        <table class="table table-striped table-sm align-middle">
          <thead>
            <tr>
              <th>Timestamp</th>
              <th>Intent</th>
              <th>Model</th>
              <th>Latency</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody id="logsTable">
          </tbody>
        </table>
      </div>
    </div>
      </div>
    </div>
  </main>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoYz1CnGdZXQ7YKj+47HCsHEB2z9vOo5dKZ7HisZV64VAN2" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.3.0/chart.umd.min.js" integrity="sha512-pHTWx2cjYLuQHtyQpSkXw3tI+pBcj+oZ7qwy3Lf2XyZDjWzB+dpftafJ+zI74hiL2rOHYNOiLmKTjaezJ4+MaA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/countup.js/2.6.2/countUp.umd.js" integrity="sha512-3fLb1LeKx9Gi+eZ9kr1OeU9wo3ArfLqNL/ODL5OwG0QLJV5vcVDZdJxzUP+vc3dZSOzM/6xY9cE1Cpf9sminbw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script nonce="a1b2c3">
    document.addEventListener('DOMContentLoaded', function() {
      document.querySelectorAll('.counter').forEach(function(el) {
        const end = parseFloat(el.getAttribute('data-target'));
        const decimals = parseInt(el.getAttribute('data-decimals')) || 0;
        new countUp.CountUp(el, end, { duration: 2, decimalPlaces: decimals }).start();
      });
      const hours = Array.from({length:24}, (_,i) => i + ':00');
      const reqData = hours.map(() => Math.floor(Math.random() * 400 + 100));
      let reqChart, latChart;
      function createReqChart(){
        const ctx = document.getElementById('requestsChart').getContext('2d');
        reqChart = new Chart(ctx, { type:'line', data:{ labels:hours, datasets:[{ label:'Requests', data:reqData, fill:true, backgroundColor:'rgba(13,110,253,0.2)', borderColor:'rgba(13,110,253,1)', tension:0.4 }] }, options:{ responsive:true, plugins:{ legend:{ display:false } }, scales:{ y:{ beginAtZero:true } } } });
      }
      const days = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
      const latData = days.map(() => Math.floor(Math.random() * 200 + 50));
      function createLatChart(){
        const ctx = document.getElementById('latencyChart').getContext('2d');
        latChart = new Chart(ctx, { type:'bar', data:{ labels:days, datasets:[{ label:'Latency (ms)', data:latData, backgroundColor:'rgba(220,53,69,0.7)', borderColor:'rgba(220,53,69,1)', borderWidth:1 }] }, options:{ responsive:true, plugins:{ legend:{ display:false } }, scales:{ y:{ beginAtZero:true } } } });
      }
      function observeChart(id, creator){
        const el = document.getElementById(id);
        if(!el) return;
        const observer = new IntersectionObserver(entries => {
          if(entries[0].isIntersecting){
            creator();
            observer.disconnect();
          }
        }, {threshold:0.3});
        observer.observe(el);
      }
      observeChart('requestsChart', createReqChart);
      observeChart('latencyChart', createLatChart);
      const models = ['gpt-4','gpt-3.5-turbo','claude-v1','llama-2'];
      const intents = ['Translate','Summarize','Answer','Classify','Generate'];
      const statuses = ['Success','Error'];
      const logs = [];
      for (let i = 0; i < 8; i++) {
        const time = new Date(Date.now() - Math.random() * 3600000 * 24).toISOString().slice(0,19).replace('T',' ');
        logs.push({
          timestamp: time,
          intent: intents[Math.floor(Math.random()*intents.length)],
          model: models[Math.floor(Math.random()*models.length)],
          latency: Math.floor(Math.random()*200+50) + 'ms',
          status: statuses[Math.random() < 0.9 ? 0 : 1]
        });
      }
      const tbody = document.getElementById('logsTable');
      logs.forEach(log => {
        const tr = document.createElement('tr');
        const tdTime = document.createElement('td');
        tdTime.textContent = log.timestamp;
        tr.appendChild(tdTime);
        const tdIntent = document.createElement('td');
        tdIntent.textContent = log.intent;
        tr.appendChild(tdIntent);
        const tdModel = document.createElement('td');
        tdModel.textContent = log.model;
        tr.appendChild(tdModel);
        const tdLatency = document.createElement('td');
        tdLatency.textContent = log.latency;
        tr.appendChild(tdLatency);
        const tdStatus = document.createElement('td');
        tdStatus.textContent = log.status;
        tr.appendChild(tdStatus);
        tbody.appendChild(tr);
      });
      document.getElementById('refreshBtn').addEventListener('click', () => location.reload());
      const msgEl = document.getElementById('apikeyMessage');
      function showDemoMessage() {
        msgEl.textContent = 'Demo Only';
        msgEl.style.display = 'block';
      }
      function showDemoText(id) {
        const el = document.getElementById(id);
        if (el) {
          el.style.display = 'block';
        }
      }
      document.getElementById('getKeyBtn').addEventListener('click', showDemoMessage);
    });
  </script>
  <script src="dashboard.js" nonce="a1b2c3"></script>
  <script src="chat.js" nonce="a1b2c3"></script>
</body>
</html>